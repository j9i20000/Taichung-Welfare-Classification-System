<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>

    <style>
        /* CSS Reset */
        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        hgroup,
        menu,
        nav,
        section {
            display: block;
        }

        body {
            line-height: 1;
        }

        ol,
        ul {
            list-style: none;
        }

        blockquote,
        q {
            quotes: none;
        }

        blockquote:before,
        blockquote:after,
        q:before,
        q:after {
            content: '';
            content: none;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        /* 背景圖 */
        .kv {
            height: 98vh;
            width: 100%;
            background-size: cover;
            background-image: url("../s1.jpg");
        }

        .kv>.container {
            height: 100%;
        }

        .text {
            text-align: center;
            font-weight: bolder;
            font-size: 20px;
            color: rgb(0, 0, 0);
            letter-spacing: 2px;
            line-height: 30px;
        }

        .text>h1 {
            font-size: 60px;
            font-weight: bold;
            color: red;
        }

        .container>.row {
            position: relative;
            top: 10%;
        }

        #smTitle {
            font-size: larger;
            font-weight: bold;
            color: mediumvioletred;
        }

        div>.form-select {
            border-radius: 15px;
            width: 120%;
        }

        #selectBox {
            margin-right: 30px;
        }

        .QualificationCheckBoxBag .form-check {
            display: inline-block;
            color: rgb(110, 26, 117);
            letter-spacing: 2px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="kv">
        <div class="container">
            <div class=" row justify-content-center">
                <div class="col-12 mb-3">
                    <div class="text">
                        <h1>臺中市兒少福利補助項目<br>快速分類系統</h1>
                        <p class="mt-3">此系統將補助項目進行簡易區分，目的使有需求人員便於快速查詢；<br>是否符合申請資格，仍請詳細參閱後續提供的資料，並連絡相關業務人員。</p>
                        <P>左方選項為單選項目，如符合多個選項時，請選擇最切合自身情況的</P>
                    </div>
                </div>
            </div>
            <div class=" row justify-content-center">
                <div class="col-1"></div>
                <div class="col-2" id="selectBox">
                    <div>
                        <select class="form-select mb-2 mt-2" aria-label="Default select example" name="age">
                            <option selected>補助對象年齡</option>
                            <option value="age2">2歲以下</option>
                            <option value="age2To3">2至3歲</option>
                            <option value="age3To6">3至6歲</option>
                            <option value="age6To12">6至12歲</option>
                            <option value="age12To18">12至18歲</option>
                        </select>
                    </div>
                    <div>
                        <select class="form-select mb-2" aria-label="Default select example"
                            name="HouseholdRegistration">
                            <option selected>設籍(台中)情況</option>
                            <option value="Registrate6months">設籍本市且監護人設籍滿6個月</option>
                            <option value="RegistrateAndLive">設籍並實際居住本市</option>
                            <option value="RegistrateCity">設籍本市</option>
                            <option value="none">以上皆無</option>
                        </select>
                    </div>
                    <div>
                        <select class="form-select " aria-label="Default select example" name="livingDays">
                            <option selected>居住日數是否大於183日</option>
                            <option value="yes">是(大於183日)</option>
                            <option value="no">否(小於183日)</option>
                        </select>
                    </div>
                </div>
                <div class="col-6">
                    <p id="smTitle">&diams;身份資格選項，符合請勾選(複選)&nbsp;: </p>
                    <div class="QualificationCheckBoxBag">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="normal" id="normal">
                            <label class="form-check-label" for="normal">
                                一般家庭
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="low" id="low">
                            <label class="form-check-label" for="low">
                                低收入戶家庭
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="medium" id="medium">
                            <label class="form-check-label" for="medium">
                                中低收入戶家庭
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="single" id="single">
                            <label class="form-check-label" for="single">
                                單親家庭
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="weakFamily" id="weakFamily">
                            <label class="form-check-label" for="weakFamily">
                                弱勢家庭
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="Disability" id="Disability">
                            <label class="form-check-label" for="Disability">
                                身心障礙或發展遲緩家庭
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="workLess" id="workLess">
                            <label class="form-check-label" for="workLess">
                                失業者家庭
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="workNight" id="workNight">
                            <label class="form-check-label" for="workNight">
                                夜間工作家庭
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="twins" id="twins">
                            <label class="form-check-label" for="twins">
                                多胞胎家庭
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="risk" id="risk">
                            <label class="form-check-label" for="risk">
                                高風險(脆弱/危機)家庭
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="weakChild" id="weakChild">
                            <label class="form-check-label" for="weakChild">
                                弱勢兒童及少年
                            </label>
                        </div>
                        <div class="form-check ">
                            <input class="form-check-input" type="checkbox" value="not20" id="not20">
                            <label class="form-check-label" for="not20">
                                兒童之監護人經稅捐稽徵機關核定之最近一年之綜合所得稅率未達20%者
                            </label>
                        </div>
                    </div>
                </div>
                <div class="col-1"></div>
                <div class="col-2 mt-3">
                    <button class="btn btn-warning btn-outline-dark btn-lg fs-5 fw-bold" aria-pressed='true'
                        type="submit">確定送出</button>
                </div>
            </div>
        </div>
    </div>




    <script>
        // 按下確定按鈕後，傳送通過的補助案代號

        $('button').click(() => {

            var arrayJudgment = {};
            //checkbox選中選項
            var cbxVehicle = new Array();
            $('input[type="checkbox"]:checked').each(function (i) { cbxVehicle[i] = this.value })

            // 被選中選項分為三大類裝成一物件
            arrayJudgment = {
                "age": $('select[name="age"]').val(),
                "HouseholdRegistration": $('select[name="HouseholdRegistration"]').val(),
                "livingDays": $('select[name="livingDays"]').val(),
                "okCheckboxOptions": cbxVehicle
            }

            //各個補助案通過條件，裝進陣列
            var conditionBox = [];
            conditionBox[0] = (arrayJudgment["age"] == "age2" || arrayJudgment["age"] == "age2To3") && (arrayJudgment["okCheckboxOptions"].includes("low") || arrayJudgment["okCheckboxOptions"].includes("medium") || arrayJudgment["okCheckboxOptions"].includes("not20") || arrayJudgment["okCheckboxOptions"].includes("weakFamily"));

            conditionBox[1] = (arrayJudgment["age"] == "age3To6") && (arrayJudgment["HouseholdRegistration"] == "Registrate6months") && (arrayJudgment["okCheckboxOptions"].includes("low") || arrayJudgment["okCheckboxOptions"].includes("medium") || arrayJudgment["okCheckboxOptions"].includes("not20") || arrayJudgment["okCheckboxOptions"].includes("weakFamily"));

            conditionBox[2] = (arrayJudgment["age"] == "age2") && (arrayJudgment["okCheckboxOptions"].includes("low") || arrayJudgment["okCheckboxOptions"].includes("medium") || arrayJudgment["okCheckboxOptions"].includes("not20"));

            conditionBox[3] = (arrayJudgment["age"] != "age12To18") && (arrayJudgment["HouseholdRegistration"] == "RegistrateAndLive" || arrayJudgment["HouseholdRegistration"] == "Registrate6months") && (arrayJudgment["okCheckboxOptions"].includes("low") || arrayJudgment["okCheckboxOptions"].includes("medium") || arrayJudgment["okCheckboxOptions"].includes("single") || arrayJudgment["okCheckboxOptions"].includes("Disability") || arrayJudgment["okCheckboxOptions"].includes("workLess") || arrayJudgment["okCheckboxOptions"].includes("workNight") || arrayJudgment["okCheckboxOptions"].includes("twins") || arrayJudgment["okCheckboxOptions"].includes("risk"));

            conditionBox[4] = (arrayJudgment["HouseholdRegistration"] == "Registrate6months" || arrayJudgment["HouseholdRegistration"] == "RegistrateAndLive") && (arrayJudgment["livingDays"] == "yes") && (arrayJudgment["okCheckboxOptions"].includes("low") || arrayJudgment["okCheckboxOptions"].includes("medium") || arrayJudgment["okCheckboxOptions"].includes("weakChild"));

            conditionBox[5] = (arrayJudgment["HouseholdRegistration"] == "Registrate6months" || arrayJudgment["HouseholdRegistration"] == "RegistrateAndLive") && (arrayJudgment["livingDays"] == "yes") && (arrayJudgment["okCheckboxOptions"].includes("low") || arrayJudgment["okCheckboxOptions"].includes("medium"));

            conditionBox[6] = (arrayJudgment["HouseholdRegistration"] == "Registrate6months" || arrayJudgment["HouseholdRegistration"] == "RegistrateAndLive") && (arrayJudgment["okCheckboxOptions"].includes("low") || arrayJudgment["okCheckboxOptions"].includes("medium") || arrayJudgment["okCheckboxOptions"].includes("weakChild"));

            conditionBox[7] = (arrayJudgment["age"] == "age2" || arrayJudgment["age"] == "age2To3" || arrayJudgment["age"] == "age3To6") && (arrayJudgment["HouseholdRegistration"] != "none") && (arrayJudgment["okCheckboxOptions"].includes("low") || arrayJudgment["okCheckboxOptions"].includes("normal"));


            //將arrayJudgment依序判斷通過的補助案條件(conditionBox)
            var dataBox = [];
            for (let x = 0; x < conditionBox.length; x++) {
                if (conditionBox[x]) {
                    dataBox.push(x)
                };
            }

            window.location.href = `showInfo.html?data=${dataBox.join("")}`;

            //傳送可通過的補助案代號(0~7)    
            // $.ajax({
            //     url: "/",
            //     type: "post",
            //     data: { "gift": dataBox },
            //     success: (res) => { console.log(res) }
            // }).then((e) => {
            //     window.location.href = 'http://localhost:5500/HTML/showInfo.html';
            // })

        })


    </script>
</body>

</html>